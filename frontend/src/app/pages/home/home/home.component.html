<div class="title-container">
  <h1>Posts Management</h1>
  <p>Manage your posts with full CRUD operations</p>
</div>

<!-- FORMULARIO NUEVA / EDIT -->
<p-card header="{{ editingPost ? 'Edit Post' : 'Create New Post' }}">
  <form [formGroup]="postForm" (ngSubmit)="editingPost ? savePost() : createPost()">
    <input type="number" pInputText placeholder="User ID" formControlName="userId" />
    <div *ngIf="postForm.get('userId')?.invalid && postForm.get('userId')?.touched" class="error">User ID required</div>

    <input type="text" pInputText placeholder="Title" formControlName="title" />
    <div *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched" class="error">
      Title required, min 3 characters
    </div>

    <input type="text" pInputText placeholder="Body" formControlName="body" />
    <div *ngIf="postForm.get('body')?.invalid && postForm.get('body')?.touched" class="error">Body required</div>

    <button pButton type="submit" label="{{ editingPost ? 'Save' : 'Create' }}" [disabled]="postForm.invalid"></button>
    <button *ngIf="editingPost" type="button" pButton label="Cancel" class="p-button-secondary" (click)="cancelEdit()"></button>
  </form>
</p-card>

<!-- LISTA DE POSTS -->
<div class="posts-list">
  <p-card *ngFor="let post of posts" styleClass="post-card">
    <h2>{{ post.title }}</h2>
    <p>{{ post.body | slice:0:50 }}...</p>

    <button pButton type="button" label="View" class="p-button-info" (click)="viewPost(post)"></button>
    <button pButton type="button" label="Edit" class="p-button-warning" (click)="editPost(post)"></button>
    <button pButton type="button" label="Delete" class="p-button-danger" (click)="deletePost(post)"></button>
  </p-card>
</div>

<!-- DIALOG POST -->
<p-dialog header="Post Details" [(visible)]="displayDialog" [modal]="true" [closable]="true" [style]="{width: '400px'}">
  <div *ngIf="selectedPost">
    <h3>{{ selectedPost.title }}</h3>
    <p>{{ selectedPost.body }}</p>
    <p><strong>User ID:</strong> {{ selectedPost.userId }}</p>
    <p><strong>Post ID:</strong> {{ selectedPost.id }}</p>
  </div>
</p-dialog>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>

<p-toast></p-toast>
